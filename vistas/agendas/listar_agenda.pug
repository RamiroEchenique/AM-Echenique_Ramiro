extends ../layout.pug

block js 
  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js",
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz",
    crossorigin="anonymous")
  script(src="/scripts/calendario.js" defer)
  script.
    // Pasar el medicoId directamente al script
    const medicoId = "#{medico.id}";

block contenido
  .container
    .row
      .col-md-12
        h1.text-center.mb-4 Dr/a:  #{medico.apellido} #{medico.nombre}
        h4.text-center.mt-5 Agendas del Profesional

    .row
      .col-md-6.offset-md-3
        select.form-select(name="agenda-select" id="agenda-select")
          each agenda in agendas
            option(value=agenda.id data-medico-id=agenda.medicoId)= `${agenda.id} - ${agenda.nombre_especialidad} - Matricula ${agenda.id_medico_especialidad} - ${(agenda.estado == 1) ? 'Activo' : 'Inactivo'}`

        input(type="date" class="form-control mt-3" id="fecha-turno" name="fecha-turno" value="#{fechaSeleccionada || ''}")

    .row.mt-5
      .col-md-12
        h3.text-center.mt-5 Turnos del DÃ­a
        table.table.table-striped
          thead
            tr
              th Fecha
              th Nombre 
              th Paciente
              th Hora Inicio
              th Hora Fin
              th Estado
          tbody
            if turnos.length
              each turno in turnos
                tr
                  td= turno.fecha
                  td= `${turno.apellido} ${turno.nombre}`
                  td= turno.motivo
                  td= turno.hora_inicio
                  td= turno.hora_fin
                  td= turno.estado
            else
              tr
                td(colspan="6") No hay turnos disponibles para la fecha seleccionada

  